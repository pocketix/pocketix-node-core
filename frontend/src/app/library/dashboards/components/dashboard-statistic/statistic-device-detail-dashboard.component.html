<p-toast></p-toast>
<app-main-chart-template
  [deviceName]="device.deviceName"
  (onReloadSwitchEventEmitter)="onReloadSwitch($event)"
>
  <line
    chart
    *ngIf="lineState.results"
        [yAxisLabel]="yAxisLabel"
        [xAxisLabel]="xAxisLabel"
        [(state)]="lineState"
        (onChanges)="onMainGraphChange()"
  >
  </line>
  <div rightColumn class="max-height-on-lg-screen p-card col-11 lg:col-4 sparkline-column">
    <h5 class="p-card-title">Statistics</h5>
    <div class="flex flex-wrap">
      <div class="fadeinright animation-duration-500 sparkline-item flex-grow-1" style="width: 300px" *ngFor="let data of sparklineState.data">
        <sparkline
          [name]="data[0].name"
          [data]="data"
          [referenceLines]="sparklineState.minMax[data[0].name]"
        >
        </sparkline>
      </div>
    </div>
  </div>
</app-main-chart-template>

<div class="grid">
  <div class="p-card col-11 gutter-hack">
    <div class="flex flex-row">
      <div class="full-height">
        <img class="full-width full-height" id="image" alt="image" style="max-width: 90px; max-height: 90px;" [src]="device.image">
      </div>
      <div class="p-card-body horizontal-flex-row flex-grow-1">
        <div *ngFor="let item of otherData" class="fadeindown animation-duration-500 not-numeric-data-item">
            <h5 class="p-card-title" style="text-align: center">{{item[1]}}</h5>
            <span class="emphasize align-content-center">{{item[0]}}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="p-card col-11 md:col-5 gutter-hack">
    <h5 class="p-card-title">KPI Thresholds</h5>
    <div class="full-width full-height grid">
      <div class="col col-12 xl:col-4"
           style="height: 130px;"
           *ngFor="let bullet of bullets"
           pTooltip="Thresholds: {{bullet.thresholds[0]}}, {{bullet.thresholds[1]}}"
           tooltipPosition="top"
      >
        <bullet-chart [value]="bullet.value"
                             [min]="bullet.min"
                             [max]="bullet.max"
                             [units]="bullet.units"
                             [name]="bullet.name"
                             [thresholds]="bullet.thresholds"
                             [previousValue]="bullet.previousValue"
                             valueTextStyle="font-size: 20px;"
                             unitsTextStyle="font-size: 20px;"
        >
        </bullet-chart>
      </div>
    </div>
  </div>
  <div class="p-card col-11 md:col-5 gutter-hack">
    <h5 class="p-card-title">Statistics</h5>
    <div class="p-card-body fadein animation-duration-500 full-width full-height grid">
      <div *ngFor="let box of boxData" class="col col-12 xl:col-6">
        <span>
          {{box.name}}
        </span>
        <apx-chart
          [series]="box.data"
          [plotOptions]="plotOptions"
          [chart]="chart"
          [yaxis]="yAxis"
          [grid]="grid"
        >
        </apx-chart>
      </div>
    </div>
  </div>
</div>
