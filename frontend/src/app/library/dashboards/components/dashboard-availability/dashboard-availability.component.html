<p-toast></p-toast>

<div class="grid">
  <div class="max-height-on-lg-screen p-card col-11 lg:col-7 gutter-hack fadeinleft animation-duration-500" style="min-height: 600px; ">
    <div class="flex justify-content-between">
      <h5 class="p-card-title">{{device?.deviceName || 'Device name'}}</h5>
      <div class="flex align-items-center">
        <label for="reload" class="reload">Automatic reload:</label>
        <p-inputSwitch id="reload" (onChange)="onReloadSwitch($event)"></p-inputSwitch>
      </div>
    </div>
    <div class="p-card-body no-bottom-padding">
      <line *ngIf="kpis"
            [results]="results"
            [allAggregationOperations]="aggregationOperations"
            [allKpis]="kpis"
            [yAxisLabel]="yAxisLabel"
            [xAxisLabel]="xAxisLabel"
            [allDevicesToCompareWith]="devicesOptions"
            [(state)]="lineState"
            (onChanges)="onMainGraphChange()"
      >
      </line>
    </div>
  </div>
  <div class="max-height-on-lg-screen col-11 lg:col-4 sparkline-column">
    <div class="p-card">
      <h5 class="p-card-title">Statistics</h5>
      <div class="flex flex-wrap">
        <div class="fadeinright animation-duration-500 sparkline-item flex-grow-1" style="width: 300px" *ngFor="let data of sparklineData">
          <sparkline
            [name]="data[0].name"
            [data]="data"
            [referenceLines]="sparklineMaxMin[data[0].name]"
          >
          </sparkline>
        </div>
      </div>
    </div>

    <div class="p-card">
      <h5 class="p-card-title">Stability</h5>
      <div class="flex flex-wrap">

      </div>
    </div>
  </div>

  <div class="p-card col-11 gutter-hack">
    <app-availability
      [availabilities]="availabilities"
    >
    </app-availability>
  </div>
</div>
