<p-toast></p-toast>

<app-main-chart-template
  (onReloadSwitchEventEmitter)="onReloadSwitch($event)"
>
  <line
    chart
    *ngIf="lineState.results"
    [yAxisLabel]="yAxisLabel"
    [xAxisLabel]="xAxisLabel"
    [(state)]="lineState"
    (onChanges)="onMainGraphChange()"
  >
  </line>
  <div rightColumn class="max-height-on-lg-screen col-11 lg:col-4 gutter-hack no-padding flex flex-column" style="margin: 15px">
    <div class="col p-card flex-grow-1 no-top-margin">
      <span class="p-card-title ">Stability</span>
      <div class="p-card-body flex flex-column flex-wrap">
        <div *ngFor="let box of boxData" class="flex-grow-1">
        <span>
          {{box.name}}
        </span>
          <apx-chart
            [series]="box.data"
            [plotOptions]="plotOptions"
            [chart]="chart"
            [yaxis]="yAxis"
            [grid]="grid"
          >
          </apx-chart>
        </div>
      </div>
    </div>

    <div class="col p-card flex-grow-1 no-bottom-margin">
      <span class="p-card-title">Statistics</span>
      <div class="p-card-body flex flex-wrap">
        <div class="fadeinright animation-duration-500 sparkline-item flex-grow-1" style="width: 300px" *ngFor="let data of sparklineState.data">
          <sparkline
            [name]="data[0].name"
            [data]="data"
            [referenceLines]="sparklineState.minMax[data[0].name]"
          >
          </sparkline>
        </div>
      </div>
    </div>
  </div>
</app-main-chart-template>

<div class="grid">
  <div class="col-11 gutter-hack p-card">
    <app-availability
      *ngIf="availabilities"
      [availabilities]="availabilities"
    >
    </app-availability>
  </div>
</div>
