<p-toast></p-toast>

<div class="grid">
  <div class="max-height-on-lg-screen p-card col-11 lg:col-7 gutter-hack fadeinleft animation-duration-500" style="min-height: 600px; ">
    <div class="flex justify-content-between">
      <h5 class="p-card-title">{{device?.deviceName || 'Device name'}}</h5>
      <div class="flex align-items-center">
        <label for="reload" class="reload">Automatic reload:</label>
        <p-inputSwitch id="reload" (onChange)="onReloadSwitch($event)"></p-inputSwitch>
      </div>
    </div>
    <div class="p-card-body no-bottom-padding">
      <line *ngIf="kpis"
        [results]="results"
        [allAggregationOperations]="aggregationOperations"
        [allKpis]="kpis"
        [yAxisLabel]="yAxisLabel"
        [xAxisLabel]="xAxisLabel"
        [allDevicesToCompareWith]="devicesOptions"
        [(state)]="lineState"
        (onChanges)="onMainGraphChange()"
      >
      </line>
    </div>
  </div>
  <div class="max-height-on-lg-screen p-card col-11 lg:col-4 sparkline-column flex flex-wrap">
    <div class="fadeinright animation-duration-500 sparkline-item flex-grow-1" style="width: 300px" *ngFor="let data of sparklineData">
      <sparkline
        [name]="data[0].name"
        [data]="data"
        [referenceLines]="sparklineMaxMin[data[0].name]"
      >
      </sparkline>
    </div>
  </div>

  <div class="p-card col-11 gutter-hack">
    <div class="flex flex-row">
      <div class="full-height">
        <img class="full-width full-height" id="image" alt="image" style="width: 100px;">
      </div>
      <div class="p-card-body horizontal-flex-row flex-grow-1">
        <div *ngFor="let item of otherData" class="fadeindown animation-duration-500 not-numeric-data-item">
            <h5 class="p-card-title" style="text-align: center">{{item[1]}}</h5>
            <span class="emphasize align-content-center">{{item[0]}}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="p-card col-11 md:col-5 gutter-hack">
    <h5 class="p-card-title">KPI Thresholds</h5>
    <div class="p-card-body horizontal-flex-row full-width full-height">
      <div class="bullet"
           *ngFor="let bullet of bullets"
           pTooltip="Thresholds: {{bullet.thresholds[0]}}, {{bullet.thresholds[1]}}"
           tooltipPosition="top"
      >
        <bullet-chart [value]="bullet.value"
                             [min]="bullet.min"
                             [max]="bullet.max"
                             [units]="bullet.units"
                             [name]="bullet.name"
                             [thresholds]="bullet.thresholds"
                             [previousValue]="bullet.previousValue"
                             valueTextStyle="font-size: 20px;"
                             unitsTextStyle="font-size: 20px;"
        >
        </bullet-chart>
      </div>
    </div>
  </div>
  <div class="p-card col-11 md:col-5 gutter-hack">
    <h5 class="p-card-title">Statistics</h5>
    <div class="p-card-body grid fadein animation-duration-500 flex flex-wrap full-width full-height">
      <apx-chart *ngFor="let box of boxData" class="col-12 xl:col-6 flex-grow-1" style="min-width: 300px"
        [series]="box"
        [plotOptions]="plotOptions"
        [chart]="chart"
        [yaxis]="yAxis"
        [grid]="grid"
      >
      </apx-chart>
    </div>
  </div>
</div>
